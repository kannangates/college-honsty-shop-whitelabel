# Types Documentation

This directory contains all TypeScript type definitions for the College Honesty
Shop Whitelabel application. All types are organized by domain/feature for
better maintainability and discoverability.

## File Structure

### Core Type Files

- **`index.ts`** - Central export file. Re-exports all types for convenience.
  ```typescript
  import type { Order, Product, User } from "@/types";
  import type { CartItem, DashboardData } from "@/types/common";
  ```

- **`auth.ts`** - Authentication and authorization types
  - `UserProfile`, `AuthSession`, `AuthUser`
  - `AuthResult`, `SignupResult`, `LoginResult`

- **`database.ts`** - Core database entity types
  - `User`, `Product`, `Order`, `Badge`, `Notification`
  - `UserRole`, `PaymentStatus`, `PaymentMode`
  - Database-specific types (e.g., `DatabaseProduct`, `DatabaseOrder`)

- **`common.ts`** - Shared types used across components
  - `CartItem`, `CartState`
  - `DashboardStats`, `DashboardData`
  - `Notification`, `Badge`
  - UI Component Props
  - Error and Validation types

- **`api.ts`** - API Request/Response types
  - All edge function request types (e.g., `SignupRequest`, `LoginRequest`)
  - API response types
  - Validation error types
  - Paginated and bulk response wrappers

- **`hooks.ts`** - Custom React Hook return types
  - `UseCartReturn`, `UseAuthReturn`, `UseDashboardDataReturn`
  - `UseNotificationsReturn`, `UseBadgeServiceReturn`
  - `UseStockManagementReturn`
  - Form and utility hook types

- **`constants.ts`** - Type-safe constants and enums
  - `USER_ROLES`, `PAYMENT_STATUS`, `ORDER_STATUS`
  - `NOTIFICATION_TYPES`, `SHIFTS`, `STOCK_OPERATIONS`
  - `API_ENDPOINTS`, `HTTP_STATUS`
  - Validation constraints and pagination defaults

- **`branding.ts`** - Whitelabel branding configuration types
  - `BrandingConfig`, `ColorScheme`
  - `MessagesJSON`, `WhitelabelConfig`

- **`supabase.ts`** - Supabase auto-generated database types
  - Auto-generated by Supabase CLI
  - Contains all table row types

## Usage Examples

### Importing Types

```typescript
// From index.ts (recommended for common types)
import type { Order, Product, User } from "@/types";

// From specific files (for more specific types)
import type { CartItem, DashboardData } from "@/types/common";
import type { SignupRequest, UpdatePointsRequest } from "@/types/api";
import type { UseCartReturn } from "@/types/hooks";
```

### Using Type-Safe Constants

```typescript
import {
  NOTIFICATION_TYPES,
  PAYMENT_STATUS,
  USER_ROLES,
} from "@/types/constants";

const admin = USER_ROLES.ADMIN; // 'admin'
const paid = PAYMENT_STATUS.PAID; // 'paid'
const announcement = NOTIFICATION_TYPES.ANNOUNCEMENT; // 'announcement'
```

### Component Props Typing

```typescript
import type { ProductCardProps } from "@/types/common";
import { Product } from "@/types/database";

export const ProductCard: React.FC<ProductCardProps> = ({
  product,
  quantity,
  onAddToCart,
  onRemoveFromCart,
}) => {
  // Component implementation
};
```

### Hook Usage

```typescript
import type { UseCartReturn } from "@/types/hooks";
import { useCart } from "@/hooks/useCart";

export const ShoppingCart = () => {
  const { items, totalAmount, addToCart, removeFromCart } =
    useCart() as UseCartReturn;
  // Hook implementation
};
```

### API Request Typing

```typescript
import type { SignupRequest } from "@/types/api";

const signupData: SignupRequest = {
  studentId: "CS21001",
  name: "John Doe",
  email: "john@example.com",
  password: "SecurePassword123",
  department: "Computer Science",
};
```

## Type Organization by Feature

### Authentication

- Files: `auth.ts`, `database.ts`
- Key Types: `UserProfile`, `AuthSession`, `LoginRequest`, `SignupRequest`

### Shopping & Cart

- Files: `common.ts`, `hooks.ts`
- Key Types: `CartItem`, `UseCartReturn`, `CheckoutResult`

### Orders & Payments

- Files: `common.ts`, `api.ts`, `database.ts`
- Key Types: `OrderWithItems`, `PaymentRecord`, `OrderManagementRequest`

### Dashboard & Analytics

- Files: `common.ts`, `hooks.ts`
- Key Types: `DashboardData`, `DashboardStats`, `UseDashboardDataReturn`

### Notifications & Gamification

- Files: `common.ts`, `database.ts`
- Key Types: `Notification`, `Badge`, `UseNotificationsReturn`,
  `UseBadgeServiceReturn`

### Product & Inventory

- Files: `common.ts`, `api.ts`, `database.ts`
- Key Types: `Product`, `StockOperation`, `InventoryOperation`

### Admin & System

- Files: `common.ts`, `api.ts`
- Key Types: `DatabaseSchema`, `InventoryRecord`, `SystemMetrics`

## Best Practices

### 1. Always Use Type Imports

```typescript
// Good
import type { Product, User } from "@/types";

// Avoid
import { Product, User } from "@/types";
```

### 2. Extend Base Types Instead of Duplicating

```typescript
// Good
export interface UserWithDetails extends User {
  totalOrders: number;
  lastOrder: Order;
}

// Avoid
export interface UserWithDetails {
  id: string;
  name: string;
  email: string;
  // ... duplicated fields
}
```

### 3. Use Type-Safe Constants

```typescript
// Good
const role: UserRoleType = USER_ROLES.ADMIN;

// Avoid
const role: string = "admin";
```

### 4. Use Discriminated Unions for Complex Types

```typescript
// Good
type ApiResponse<T> =
  | { success: true; data: T }
  | { success: false; error: string };

// Avoid
interface ApiResponse<T> {
  success: boolean;
  data?: T;
  error?: string;
}
```

### 5. Use Readonly for Constants

```typescript
// Good
export const FEATURES = { CART: "cart", CHECKOUT: "checkout" } as const;

// Avoid
export const FEATURES = {
  CART: "cart",
  CHECKOUT: "checkout",
};
```

## Type Safety Checklist

- [ ] All function parameters have explicit types
- [ ] All React component props are typed via interfaces
- [ ] API responses are typed with specific response types
- [ ] Database queries return typed results
- [ ] Hook return values are fully typed
- [ ] Error states have specific error types
- [ ] Form values and submission handlers are typed
- [ ] Event handlers have proper event types

## Adding New Types

When adding new features to the application:

1. **Identify the domain** - Which feature/module does this relate to?
2. **Choose the correct file** - Add to the appropriate file (e.g., `common.ts`
   for UI types, `api.ts` for API types)
3. **Follow naming conventions**:
   - Request types: `*Request` (e.g., `SignupRequest`)
   - Response types: `*Response` (e.g., `ApiResponse`)
   - Component prop types: `*Props` (e.g., `ProductCardProps`)
   - Hook return types: `Use*Return` (e.g., `UseCartReturn`)
4. **Export from appropriate file** and update `index.ts` if it's a commonly
   used type
5. **Add documentation** in the type definition via JSDoc comments

## Migration to Production

This type system is production-ready and follows these best practices:

✅ All types are strictly typed with no `any` usage ✅ Type imports (`type`
keyword) are used to prevent runtime bloat ✅ Discriminated unions for complex
state management ✅ Type-safe constants to prevent string errors ✅
Comprehensive API type coverage ✅ Complete hook type definitions ✅ Proper
error and validation typing ✅ Database schema types synchronized with Supabase

## Troubleshooting

### Type Conflicts

If you encounter type conflicts, check:

1. That you're importing `type` not the runtime value
2. That you're extending base types correctly
3. That circular dependencies don't exist

### Missing Types

If a type is missing:

1. Check the appropriate file (database, common, api, hooks)
2. Create the type in the appropriate file
3. Export it from `index.ts` if it's commonly used

### Module Resolution Issues

If types aren't resolving:

1. Ensure `@/types` path alias is configured in `tsconfig.json`
2. Check that files are properly exported
3. Restart TypeScript language server in your IDE
